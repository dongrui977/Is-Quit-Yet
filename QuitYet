import 'package: flutter/material.dart';

void main() => runApp(QuitYetApp());

class QuitYetApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      theme: ThemeData.dark(), // å¿…é¡»æ˜¯æ·±è‰²æ¨¡å¼ï¼Œç¬¦åˆæ‰“å·¥äººçš„å¿ƒæƒ…
      home: HomePage(),
    );
  }
}

class HomePage extends StatefulWidget {
  @override
  _HomePageState createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  bool isQuit = false; // æ˜¯å¦çœŸçš„ç¦»èŒäº†
  int workDays = 0;    // è¿žç»­æ‰“å¡ï¼ˆè‹Ÿæ´»ï¼‰å¤©æ•°

  // æ¨¡æ‹Ÿæ‰“å·¥äººå¤´åƒåºåˆ—
  String get workerAvatar {
    if (isQuit) return "ðŸŒˆ"; // ç¦»èŒåŽå˜å½©è™¹
    if (workDays > 10) return "ðŸ¤¡"; // æ’‘å¤ªä¹…å˜å°ä¸‘
    if (workDays > 5) return "ðŸ§Ÿ"; // è¿žç»­åŠ ç­å˜åƒµå°¸
    return "ðŸ˜‘"; // æ—¥å¸¸éº»æœ¨
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text("ä»Šæ—¥è¾žäº†å—ï¼Ÿ", style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold)),
            SizedBox(height: 40),
            // çµé­‚å¤´åƒæ˜¾ç¤º
            AnimatedContainer(
              duration: Duration(milliseconds: 500),
              padding: EdgeInsets.all(40),
              decoration: BoxDecoration(
                shape: BoxShape.circle,
                color: isQuit ? Colors.green : Colors.grey[800],
                boxShadow: [BoxShadow(color: Colors.black45, blurRadius: 10)],
              ),
              child: Text(workerAvatar, style: TextStyle(fontSize: 80)),
            ),
            SizedBox(height: 60),
            // æ ¸å¿ƒæ‰“å¡æŒ‰é’®
            ElevatedButton(
              onPressed: () {
                setState(() {
                  workDays++;
                  // æ¨¡æ‹Ÿä¸€ä¸ªéšæœºçš„â€œå´©æºƒâ€æ•ˆæžœ
                  if (workDays % 7 == 0) print("æ€¨æ°”å€¼çˆ†è¡¨ï¼");
                });
              },
              style: ElevatedButton.styleFrom(backgroundColor: Colors.redAccent),
              child: Text("æ²¡å‘¢ï¼Œè¿˜åœ¨è‹Ÿç€ (Day $workDays)"),
            ),
            TextButton(
              onPressed: () {
                setState(() => isQuit = true);
                _showVictoryDialog();
              },
              child: Text("ç‚¹æ­¤åŽŸåœ°è§£è„±", style: TextStyle(color: Colors.grey)),
            ),
          ],
        ),
      ),
    );
  }

  void _showVictoryDialog() {
    showDialog(
      context: context,
      builder: (context) => AlertDialog(
        title: Text("æ­å–œï¼"),
        content: Text("ä½ å·²æˆåŠŸä»Žèµ›åšå·¥åŽ‚èµŽèº«ï¼ŒåŽ»å¯»æ‰¾è¯—å’Œè¿œæ–¹å§ã€‚"),
        actions: [TextButton(onPressed: () => Navigator.pop(context), child: Text("èµ·é£ž"))],
      ),
    );
  }
}
